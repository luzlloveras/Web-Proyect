<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Ejercicio 05 - ESPECIALES</title>
		<link rel="stylesheet" type="text/css" href="./estilos.css">
	</head>
	<body>
		<div class="encabezado-pie">Formulario de alta para artistas musicales</div>
		<div class="contenedor">
			<form id="formulario">
				<div class="columna">
					<label>Nombre:</label>
					<input type="text" name="nombre" id="nombre" required>
					<label>Posicion:</label>
					<select id="posicion" name="posicion"required>
						
					</select>
				</div>
				<div class="columna">
					<label>Fecha de nacimiento:</label>
					<input type="date" id="fechaNac" name="fechaNac" required>
					<label>Shows realizados:</label>
					<input type="number" id="shows" name="shows" min="1" max="99" required>
				</div>
				<div class="clear"></div>
				<div class="boton">
					<button id="enviar">Enviar</button>
				</div>	
			</form>
		</div>
		<div class="encabezado-pie">Pie del formulario</div>
	</body>
	<script src="../jquery.js" type="text/javascript"></script>
	<script src="../posiciones.json" type="text/javascript"></script>
	<script type="text/javascript">
		var pos= JSON.parse(textoPosiciones);
		var selectPos= document.getElementById("posicion");
		var opcion;
		var boton= document.getElementById("enviar");
		var num=document.getElementById("shows");
		var nom=document.getElementById("nombre");
		var posic=document.getElementById("posicion");
		var fechaN=document.getElementById("fechaNac");
		document.getElementById("formulario").method="get";
		document.getElementById("formulario").action="./respuesta.html";
		$(document).ready(function creaOpciones(){
			pos.posiciones.forEach(function(argValor,argIndice){
				var opcion=document.createElement("option");
				opcion.setAttribute("value",argValor.pos);
				opcion.innerHTML=argValor.desc;
				selectPos.appendChild(opcion);
			});	
		});
		num.onkeyup=function(){
			if(!num.checkValidity()){
				alert("El shows ingresado debe estar entre 1 y 99");
				document.getElementById("shows").value="";
			}
		}
		enviar.onclick=function(){
			if(num.checkValidity()&&nom.checkValidity()&&posic.checkValidity()&&fechaN.checkValidity()){
				document.getElementById("formulario").submit();
			}
			else{
				alert("Debe completar todos los campos");
			}
		}
	</script>
</html>